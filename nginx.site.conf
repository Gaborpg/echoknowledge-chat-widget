server {
  listen 80;
  server_name _;

  root /usr/share/nginx/html;
  index index.html;

  # CORS for cross-origin module scripts & CSS
  add_header Access-Control-Allow-Origin "*" always;
  add_header Access-Control-Allow-Methods "GET, OPTIONS" always;
  add_header Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept, Range" always;
  add_header Cross-Origin-Resource-Policy "cross-origin" always;
  if ($request_method = OPTIONS) { return 204; }

  # JS/CSS
  location ~* \.(?:js|css)$ {
    try_files $uri =404;
    add_header Access-Control-Allow-Origin "*" always;
    add_header Cache-Control "public, max-age=31536000, immutable";
  }

  # Static assets
  location ~* \.(?:png|jpe?g|gif|svg|ico|txt|json)$ {
    try_files $uri =404;
    add_header Cache-Control "public, max-age=31536000, immutable";
  }

  # SPA fallback (only if you browse / directly)
  location / { try_files $uri $uri/ /index.html; }
}
